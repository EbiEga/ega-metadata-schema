# This is the YAML schema file containing the hierarchy of elements and their attributes
# represented within the submission XML file.

tool_info:  # Contains info about the conversion tool and this schema file.
    # Version (string: !!str): defines the tool version for which this YAML was created.
    version: !!str 1.0
    # update_date (ISO 8691 format): defines the date of the last update for this file.
    update_date: 2021-02-04

# Contains info about where the XML schemas instances are. This information will be used
#   when creating each object's XML.
XML_schemas_info:
    # Information regardig the XSD download if needed:
    file_extension: "xsd"
    ftp_server: "ftp.ebi.ac.uk"
    schemas_dir: "pub/databases/ena/doc/xsd/sra_1_5/"
    # Information regarding the XML construction:
    schema_instance_reference: "noNamespaceSchemaLocation"
    schema_instance: "http://www.w3.org/2001/XMLSchema-instance"
    schemas_directory: "http://ftp.ebi.ac.uk/pub/databases/ena/doc/xsd/sra_1_5/"
    object_schemas:
        #! Here we will add all of the "htpp://ftp.sra.ebi.ac.uk/meta/xsd/sra_1_5/" files
        sample: "ftp://ftp.sra.ebi.ac.uk/meta/xsd/sra_1_5/SRA.sample.xsd"
        experiment: "ftp://ftp.sra.ebi.ac.uk/meta/xsd/sra_1_5/SRA.experiment.xsd"
        run: "ftp://ftp.sra.ebi.ac.uk/meta/xsd/sra_1_5/sra_1_5/SRA.run.xsd"
        dac: "ftp://ftp.sra.ebi.ac.uk/meta/xsd/sra_1_5/EGA.dac.xsd"
        dataset: "ftp://ftp.sra.ebi.ac.uk/meta/xsd/sra_1_5/EGA.dataset.xsd"
        policy: "ftp://ftp.sra.ebi.ac.uk/meta/xsd/sra_1_5/EGA.policy.xsd"
        analysis: "ftp://ftp.sra.ebi.ac.uk/meta/xsd/sra_1_5/SRA.analysis.xsd"
        study: "ftp://ftp.sra.ebi.ac.uk/meta/xsd/sra_1_5/SRA.study.xsd"
        submission: "ftp://ftp.sra.ebi.ac.uk/meta/xsd/sra_1_5/SRA.submission.xsd"

# Every element (XML node) can have 4 characteristics:
#       - children: it contains a dictionary with the children elements of the current node (e.g. TAXON_ID and COMMON_NAME
#                   would be the children of SAMPLE_NAME)
#                   Example: in the following XML, the element "FILE" is the children of element "FILES"
#                            <FILES>
#                               <FILE filename="path/to/file.txt"/>
#                            </FILES>
#       - attributes:   it contains a dictionary of the attributes, where the keys are the XML tags (e.g. "alias")
#                       and its values are their corresponding column name in the dataframe (e.g. "Sample_ID")
#                       Example: in the following XML, "filename" is the attribute of the element "FILE"
#                                <FILE filename="path/to/file.txt"/>
#       - text: it contains a string with the text that should be put within the XML element (e.g. <TAXON_ID>9606</TAXON_ID>)
#               Example: in the following XML, "gender" is the text within the element "TAG"
#                                <TAG>gender</TAG
#       - repetitive_node: if this line exists, it defines a repetitive node, which means that the tool will try to infer
#                          how many times it shall be repeated (based on the input dataframe's columns). It can be a plain
#                          "repetitive_node:" or with any other element inside (e.g. "repetitive_node: True").
#                          Example: in the following XML, the element "FILE" is repeated thrice.
#                            <FILES>
#                               <FILE filename="path/to/file1.txt"/>
#                               <FILE filename="path/to/file2.txt"/>
#                               <FILE filename="path/to/file3.txt"/>
#                            </FILES>

#! Important: if we create a node's attribute/text in this schema, there HAS to be a column in the input dataframe
#!            referencing it. Even if it's empty.

####-------------####
# - SAMPLE OBJECT - #
####-------------####
#! We may want to add the "links" element allowed within XSD sample schema.
sample:
    attributes:
         alias: "Sample_alias"
         center_name: "Center_name"
    children:
        title:
            text: "Title"
        sample_name:
            children:
                taxon_id:
                    text: "NCBI_taxid"
                scientific_name:
                    text: "Scientific_name"
                common_name:
                    text: "Common_name"
        description:
            text: "Description"
        sample_attributes:
            children:
                sample_attribute:
                    repetitive_node:
                    children:
                        tag:
                            text: "Tag"
                        value:
                            text: "Value"
                        units:
                            text: "Units"

####----------####
# - Run OBJECT - #
####----------####
run:
    attributes:
        alias: "Run_alias"
        center_name: "Center_name"
        run_center: "CN_Acronym"
    children:
        experiment_ref:
            attributes:
                refname: "Experiment_reference"
        run_type:
            children:
                reference_alignment:
                    children:
                        assembly:
                            children:
                                standard:
                                    attributes:
                                        refname: "Assembly_name"
                                        accession: "Assembly_accession"
        data_block:
            children:
                files:
                    children:
                        file:
                            repetitive_node:
                            attributes:
                                filename: "Filename"
                                filetype: "Filetype"
                                checksum_method: "Checksum_method"
                                checksum: "Encrypted_checksum"
                                unencrypted_checksum: "Unencrypted_checksum"
