{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://github.com/EbiEga/ega-metadata-schema/tree/main/schemas/EGA.ArrayExperiment.json",
    "type": "object",
    "title": "EGA ArrayExperiment metadata schema",
    "description": "Metadata schema used by the European Genome-phenome Archive (EGA) to validate its ArrayExperiment metadata object. This objects is intended to be similar to the Experiment metadata object from ENA, but containing metadata from an Array Format (AF) submission. Further details can be found in the EGA-metadata-schema GitHub repository (https://github.com/EbiEga/ega-metadata-schema/tree/main/schemas) and EGA-archive website (https://ega-archive.org/)",
    "required": ["object_ids", "technology", "array_label", "experimental_design", "array_type", "assayed_molecule"],
    "additionalProperties": false,
    "properties": {
      "object_ids": {
        "type": "object",
        "title": "Object's IDs block",
        "description": "Node containing the main identifiers of the object (e.g. alias, center_name...), inherited from the common definitions. #! We extend the core object (object_coreIDs) by adding a pattern check based on this schema's nature: an ArrayExperiment (by using EGA-ArrayExperiment-id-pattern)", 
        "allOf": [
          {
            "$ref": "https://github.com/EbiEga/ega-metadata-schema/tree/main/schemas/EGA.common-definitions.json#/definitions/object_coreIDs"
          },
          {
            "properties": {
              "accession": {
                "$ref": "https://github.com/EbiEga/ega-metadata-schema/tree/main/schemas/EGA.common-definitions.json#/definitions/EGA-ArrayExperiment-id-pattern"
              }
            }
          }
        ]
      },    
      "title": {
        "type": "string",
        "title": "Title of the ArrayExperiment",
        "description": "An informative experiment title that should serve as an overview of the experiment, including: used technology, samples, purpose... (e.g. Affymetrix-X microarray of human breast cancer cell line MCF-7 treated with tamoxifen compared with untreated controls). This short text can be used to call out ArrayExperiment records in searches or in displays. This element is technically optional but should be used for all new records."
      },
      "description": {
        "type": "string",
        "title": "Description of the ArrayExperiment",
        "description": "An in-depth description of the biological relevance and intent of the ArrayExperiment, including the experimental workflow."
      },
      "technology": {
        "type": "string",
        "title": "Microarray technology of the ArrayExperiment [EFO:0002698]",
        "description": "Microarray technology applicable for the ArrayExperiment (e.g. One-colour microarray [EFO:0010939], Two-colour microarray [NCIT:C116153], Protein microarray [EFO:0002702]...)",
        "enum": ["One-colour microarray [EFO:0010939]", "Two-colour microarray [NCIT:C116153]", "Methylation microarray [NCIT:C165222]", "Protein microarray [EFO:0002702]", "Metabolomic microarray [#!]", "Single Nucleotide Polymorphism Array [NCIT:C116151]", "Tissue Microarray [NCIT:C19922]"]
      },
      "array_label": {
        "type": "string",
        "title": "Array label of the ArrayExperiment [EFO:0000562]",
        "description": "Chemicals (e.g. 'Cy3 fluorescent dye' or 'Biotin [CHEBI:15956]') conjugated to nucleic acid/proteins to label them before microarray hybridisation. Can be repeated so that we take into account dual labelled arrays."
      },
      "experimental_design": {
        "type": "string",
        "title": "Experimental design of the ArrayExperiment [EFO:0001426]",
        "description": "Experimental factor, chosen from a list of CV (e.g. RNA stability design [EFO:0001783], binding site identification design [EFO:0004664], case control design [EFO:0001427]), describing the method of investigating particular types of research questions or solving particular types of problems.",
        "enum": ["RNA stability design [EFO:0001783]", "binding site identification design [EFO:0004664]", "case control design [EFO:0001427]", "cell component comparison design [EFO:0001743]", "cell cycle design [EFO:0001744]", "cell type comparison design [EFO:0001745]", "cellular modification design [EFO:0004666]", "clinical history design [EFO:0001780]", "compound treatment design [EFO:0001755]", "cross sectional design [EFO:0001428]", "development or differentiation design [EFO:0001746]", "disease state design [EFO:0001756]", "dose response design [EFO:0001757]", "twin design [EFO:0001431]", "genetic modification design [EFO:0001758]", "genotype design [EFO:0001748]", "growth condition design [EFO:0001759]", "imprinting design [EFO:0001747]", "injury design [EFO:0001760]", "innate behavior design [EFO:0001749]", "organism part comparison design [EFO:0001750]", "organism status design [EFO:0001751]", "pathogenicity design [EFO:0001761]", "population based design [EFO:0001430]", "sex design [EFO:0001752]", "species design [EFO:0001753]", "stimulus or stress design [EFO:0001762]", "strain or line design [EFO:0001754]", "time series design [EFO:0001779]"]
      },
      "array_type": {
        "type": "string",
        "title": "Array type of the ArrayExperiment [EFO:0002696]",
        "description": "Type of array (not its purpose per se), chosen from a list of CV (e.g. Transcription profiling by array [EFO:0002768]), providing a glimpse of the used technology.",
        "enum": ["3C [EFO:0007689]", "4C [EFO:0007690]", "ChIP-chip by array [EFO:0002760]", "ChIP-chip by SNP array [EFO:0002764]", "ChIP-chip by tiling array [EFO:0002762]", "RNAi profiling by array [EFO:0001030]", "Comparative genomic hybridization by array [EFO:0000749]", "Genotyping by array [EFO:0002767]", "Methylation profiling by array [EFO:0002759]", "microRNA profiling by RT-PCR [EFO:0007687]", "microRNA profiling by array [EFO:0000753]", "Proteomic profiling by array [EFO:0002765]", "RIP-chip (RNP immunoprecipitation-chip) by array [EFO:0005517]", "Tiling path by array [EFO:0001031]", "Transcription profiling by array [EFO:0002768]", "Transcription profiling by tiling array [EFO:0002769]", "Translation profiling [EFO:0001033]"]
      },
      "assayed_molecule": {
        "type": "string",
        "title": "Assayed molecule in the ArrayExperiment [EFO:0002772]",
        "description": "Type of molecule assayed, chosen from a list of CV (e.g. DNA assay [EFO:0001456] or RNA assay [EFO:0001457]).",
        "enum": ["DNA assay [EFO:0001456]", "RNA assay [EFO:0001457]", "Metabolomic profiling [EFO:0000752]", "Protein assay [EFO:0001458]"]
      },
      "ADF_files": {
        "type": "array",
        "title": "Array Design Format (ADF) [NCIT:C172213] file block",
        "description": "The array design format (ADF) [NCIT:C172213] is the unique set of probes (with their coordinates) found on the microarray chip. They can be standard (sold by a company) or custom. Its format is of a spreadsheet-like tab-delimited text file with metadata header rows, followed by a multi-column table of probe information. This object shall only be used if the EGA is the one storing such file. Otherwise, the Relationships object shall be used to point from the ArrayExperiment to the ADF submitted elsewhere. #! Using an empty item list but defining the file object as possible additionalItems we create the correct constraint: anything but a file object is rejected, but EGA can add as many as required.",
        "additionalProperties": false,
        "additionalItems": { "$ref": "https://github.com/EbiEga/ega-metadata-schema/tree/main/schemas/EGA.common-definitions.json#/definitions/file_object" },
        "items": []
      },
      "sample_number": {
        "type": "integer",
        "title": "Number of samples of the ArrayExperiment",
        "description": "Number of samples included in the experiment. One sample corresponds to one biological replicate [EFO:0002091] (it could be the genetic content from a single cell, a tissueâ€¦ from a single individual or from several individuals). Shall not be mistaken for technical replicates [CHEBI:24432] being used several times (see https://www.ebi.ac.uk/seqdb/confluence/pages/viewpage.action?spaceKey=EGA&title=Sample+Representation)."
      },

      "ArrayExperiment_relationships": {
        "type": "array",
        "title": "ArrayExperiment relationships",
        "description": "Comprises metadata (e.g. Source or Target) of a directional association between two entities. This relationships node contains all the possible relationships between metadata objects, both outside of (e.g. an Array Design Format that was submitted to ArrayExpress being linked to their microarray data within EGA) and within (e.g. an ArrayExperiment being linked to a Sample) the EGA. #! Using an empty item list but defining the relationship as possible additionalItems we create the correct constraint: anything but a relationship object is rejected, but EGA can add as many as required.",
        "additionalProperties": false,
        "additionalItems": { "$ref": "https://github.com/EbiEga/ega-metadata-schema/tree/main/schemas/EGA.common-definitions.json#/definitions/relationship_object" },
        "items": []
      },

      "ArrayExperiment_attributes": {
        "type": "array",
        "title": "ArrayExperiment custom attributes",
        "description": "Custom attributes of an ArrayExperiment: reusable attributes to encode tag-value pairs (e.g. Tag being 'Targeted loci' and its Value '5:63256183-63258334') with optional units (e.g. 'base pairs'). Its properties are inherited from the common-definitions.json schema. #! Using an empty item list but defining the custom attributes as possible additionalItems we create the correct constraint: anything but a custom attribute is rejected, but EGA can add as many as required.",
        "additionalProperties": false,
        "additionalItems": { "$ref": "https://github.com/EbiEga/ega-metadata-schema/tree/main/schemas/EGA.common-definitions.json#/definitions/custom_attribute" },
        "items": []
      },

      "ArrayExperiment_protocols": {
        "type": "array",
        "title": "Protocols related to an ArrayExperiment",
        "description": "Comprises metadata (e.g. Type of protocol) of a plan specification related to an ArrayExperiment, with sufficient level of detail and quantitative information to communicate it (and thus reproduce it) between investigation agents. #! Using an empty item list but defining the protocols as possible additionalItems we create the correct constraint: anything but a protocol is rejected, but EGA can add as many as required.",
        "additionalProperties": false,
        "additionalItems": { "$ref": "https://github.com/EbiEga/ega-metadata-schema/tree/main/schemas/EGA.common-definitions.json#/definitions/protocols_object" },
        "items": []
      }

    }
      
  }