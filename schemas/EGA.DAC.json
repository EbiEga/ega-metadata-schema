{
    "$schema": "https://json-schema.org/draft/2019-09/schema",
    "$id": "https://raw.githubusercontent.com/EbiEga/ega-metadata-schema/main/schemas/EGA.DAC.json",
    "type": "object",
    "title": "EGA DAC metadata schema",
    "meta:version": "1.0.0",
    "required": ["DAC_SET"],
    "additionalProperties": false,
    "properties": {
        "DAC_SET": {
            "type": "array",
            "description": "Container for a set of data access committees.",
            "minItems": 1,
            "uniqueItems": true,
            "items": {
                "type": "object",
                "required": ["DAC"],
                "additionalProperties": false,
                "properties": {
                    "DAC": {
                        "$ref": "#/definitions/DacType"
                    }
                }
            }
        }
    },
    "definitions": {
        "DacType": {
            "type": "object",
            "description": "Describes an object that contains data access comittee  information including contacts",
            "allOf": [
                { "$ref": "EGA.common.json#/definitions/ObjectType" }
            ],
            "required": ["TITLE", "CONTACTS"],
            "properties": {
                "TITLE": {
                    "type": "string",
                    "description": "Short text that can be used to call out DAC records in searches or in displays."
                },
                "CONTACTS": {
                    "type": "array",
                    "minItems": 1,
                    "additionalProperties": false,
                    "uniqueItems": true,
                    "items": { 
                        "type": "object",
                        "required": ["CONTACT"],
                        "properties": {
                            "CONTACT": {
                                "types": "object",
                                "required": ["name", "email", "organisation"],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "description": "Name of contact person for this DAC."
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "description": "email of the person to contact."
                                    },
                                    "telephone_number": {
                                        "type": "string",
                                        "description": "telephone_number of the person to contact."
                                    },
                                    "organisation": {
                                        "type": "string",
                                        "description": "Center or institution name ."
                                    },
                                    "main_contact": {
                                        "type": "boolean",
                                        "description": "If true then this is the main contact."
                                    }
                                }
                            }
                        }              
                    }
                },
                "DAC_LINKS": {
                    "type": "array",
                    "description": "Links to related resources.",
                    "minItems": 1,
                    "additionalProperties": false,
                    "uniqueItems": true,
                    "items": {
                        "type": "object",
                        "required": ["DAC_LINK"],
                        "properties": {
                            "DAC_LINK": {
                                "$ref": "./EGA.common.json#/definitions/LinkType"
                            }
                        }
                    }
                },
                "DAC_ATTRIBUTES": {
                    "type": "array",
                    "description": "Properties and attributes of the DAC. These can be entered as free-form tag-value pairs. Submitters may be asked to follow a community established ontology when describing the work.",
                    "minItems": 1,
                    "additionalProperties": false,
                    "uniqueItems": true,
                    "items": {
                        "type": "object",
                        "required": ["DAC_ATTRIBUTE"],
                        "properties": {
                            "DAC_ATTRIBUTE": {
                                "$ref": "./EGA.common.json#/definitions/AttributeType"
                            }
                        }
                    }
                }
            }           
        }
    }
}