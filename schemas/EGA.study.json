{
    "$schema": "https://json-schema.org/draft/2019-09/schema#",
    "$id": "https://raw.githubusercontent.com/EbiEga/ega-metadata-schema/main/schemas/EGA.study.json",
    "type": "object",
    "title": "EGA Study metadata schema",
    "meta:version": "1.0.0",
    "required": ["STUDY_SET"],
    "additionalProperties": false,
    "properties": {
      "STUDY_SET": {
        "type": "array",
        "description": "Container for a set of studies.",
        "minItems": 1,
        "uniqueItems": true,
        "items": {
          "type": "object",
          "required": ["STUDY"],
          "properties": {
            "STUDY": {
                "$ref": "#/definitions/StudyType"
            }
          }
        }
      }
    },
    "definitions": {
      "StudyType": {
        "type": "object",
        "description": "A Study is a container for a sequencing investigation that may comprise multiple experiments. The Study has an overall goal, but is otherwise minimally defined in the SRA. A Study is composed of a descriptor, zero or more experiments, and zero or more analyses. The submitter may decorate the Study with web links and properties.",
        "required": ["DESCRIPTOR"],
        "allOf": [
          { "$ref": "EGA.common.json#/definitions/ObjectType" }
        ],
        "properties": {
          "DESCRIPTOR": {
            "type": "object",
            "required": ["STUDY_TITLE", "STUDY_TYPE"],
            "properties": {
              "STUDY_TITLE": {
                "type": "string",
                "description": "Title of the study as would be used in a publication."
              },
              "STUDY_TYPE": {
                "type": "object",
                "properties": {
                  "existing_study_type": {
                    "type": "string",
                    "enum": ["Whole Genome Sequencing", "Metagenomics", "Transcriptome Analysis", "Resequencing", "Epigenetics", "Synthetic Genomics", "Forensic or Paleo-genomics", "Gene Regulation Study", "Cancer Genomics", "Population Genomics", "RNASeq", "Exome Sequencing", "Pooled Clone Sequencing", "Transcriptome Sequencing", "Other"],
                    "description": "The STUDY_TYPE presents a controlled vocabulary for expressing the overall purpose of the study."
                  },
                  "new_study_type": {
                    "type": "string",
                    "description": "To propose a new term, select Other and enter a new study type."
                  }
                },
                "required": ["existing_study_type"]
              },
              "STUDY_ABSTRACT": {
                "type": "string",
                "description": "Briefly describes the goals, purpose, and scope of the Study. This need not be listed if it can be inherited from a referenced publication."
              },
              "CENTER_NAME": {
                "type": "string",
                "description": "DEPRECATED. Use STUDY@center_name instead. Controlled vocabulary identifying the sequencing center, core facility, consortium, or laboratory responsible for the study."
              },
              "CENTER_PROJECT_NAME": {
                "type": "string",
                "description": "Submitter defined project name. This field is intended for backward tracking of the study record to the submitter's LIMS."
              },
              "PROJECT_ID": {
                "type": "integer",
                "minimum": 0,
                "description": "DEPRECATED (use RELATED_STUDIES.STUDY instead). The required PROJECT_ID accession is generated by the Genome Project database at NCBI and will be valid also at the other archival institutions."
              },
              "RELATED_STUDIES": {
                "type": "array",
                "description": "Related study or project record from a list of supported databases. The study's information is derived from this project record rather than stored as first class information.",
                "minItems": 1,
                "uniqueItems": true,
                "items": {
                  "type": "object",
                  "required": ["RELATED_STUDY"],
                  "properties": {
                    "RELATED_STUDY": {
                      "required": ["RELATED_LINK", "IS_PRIMARY"],
                      "properties": {
                        "RELATED_LINK": { "$ref": "EGA.common.json#/definitions/XRefType" },
                        "IS_PRIMARY": {
                          "type": "boolean",
                          "description": "Whether this study object is designated as the primary source of the study or project information."
                        }
                      }
                    }
                  }
                }
              },
              "STUDY_DESCRIPTION": {
                "type": "string",
                "description": "More extensive free-form description of the study."
              }
            }
          },
          "STUDY_LINKS": {
            "type": "array",
            "description": "Links to resources related to this study (publication, datasets, online databases).",
            "minItems": 1,
            "uniqueItems": true,
            "items": {
              "properties": {
                "STUDY_LINK": {
                  "$ref": "EGA.common.json#/definitions/LinkType"
                }
              }                
            }
          },
          "STUDY_ATTRIBUTES": {
            "type": "array",
            "description": "Properties and attributes of the study. These can be entered as free-form tag-value pairs. For certain studies, submitters may be asked to follow a community established ontology when describing the work.",
            "minItems": 1,
            "uniqueItems": true,
            "items": { 
                "type": "object",
                "required": ["STUDY_ATTRIBUTE"],
                "STUDY_ATTRIBUTE": {
                    "$ref": "EGA.common.json#/definitions/AttributeType"
                }
            }
          }
        }
      }
    }
  }
  